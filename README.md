# Основное задание:

1. Account URL: http://localhost:8001/api/swagger/

2. Hospital URL: http://localhost:8002/api/swagger/

3. Timetable URL: http://localhost:8003/api/swagger/

4. Document URL: http://localhost:8004/api/swagger/

# Дополнительное задание:

1. ElasticSearch URL: http://localhost:9200/

2. Kibana URL: http://localhost:5601/

# Информация от участника

## Навигация
* [О проекте](#о-проекте)
* [Установка и запуск](#установка-и-запуск)
* [Об особенностях данных при отправке на сервер](#Об-особенностях-данных-при-отправке-на-сервер)

---

## О проекте

Данный проект написан на таком фреймворке как [**Django**](https://github.com/django/django) версии 4.2. Для создания API было принято решение использовать [**Django Rest Framework**](https://github.com/encode/django-rest-framework). Данный проект состоит только из API и разбит на микросервисную архитектуру со следующими микросервисами:
- Account;
- Hospital;
- Timetable;
- Document.


---

## Установка и запуск
Клонируем репозиторий из github:
```bash
git clone https://github.com/DEV-m1k0/API_competion
```
Переходим в папку с проектом:
```bash
cd ./API_competion/
```

> [!CAUTION]
> Перед выполнением следующей команды, убедитесь, что у вас запущен **Docker**. Так же убедитесь, что у вас не заняты следующие порты:
> * 127.0.0.1:8001 (На данном порту будет размещен микросервис 'Account')
> * 127.0.0.1:8002 (На данном порту будет размещен микросервис 'Hospital')
> * 127.0.0.1:8003 (На данном порту будет размещен микросервис 'Timetable')
> * 127.0.0.1:8004 (На данном порту будет размещен микросервис 'Document')
> * 127.0.0.1:9200 (На данном порту будет размещен Elasticsearch)
> * 127.0.0.1:5601 (На данном порту будет размещен Kibana)
> * 127.0.0.1:5434 (На данном порту будет размещен Postgresql)

Запустим сервер с микросервисами через команду:
```bash
docker-compose up -d
```

---
## Об особенностях данных при отправке на сервер

**1) POST /api/Authentication/Refresh**
Для данного URL POST запрос должен выглядеть следующим образом:
```json 
{
	"refresh": "string"
}
```

 **2) GET /api/History/Account/{id}**
Было разработано такое решение потому, что у пользователя с переданным id может быть несколько историй посещения врачей и данный формат ответа будет более корректным, чем тот, что представлен в ТЗ:
```json
{
    "История: ФИ пользователя": {
        "Номер истории": {
            "id": "int",
            "pacientId": "int",
            "hospitalId": "int",
            "doctorId": "int",
            "room": "stгing",
            "date": "dateTime(ISO8601)",
            "data": "string"
        },
    }
}
```

**3) POST /api/Timetable**
В данном *POST* запросе **from** и **to** изменены на **date_from** и **date_to**, так как в python from является встроенной командой для импорта данных, поэтому было принято решение видоизменить названия.

**4) POST /api/History**
Было решено добавить еще одно ограничение, а именно: <strong><u>"Нельзя добавить историю, если пользователь не был записан на данное время".</u></strong> Это значит, что нужно сначала записаться пользователю на прием и на основе данной записи уже можно будет сформировать историю.
>В ТЗ не было сказано о таком ограничении, но я подумал, что оно давольно важное и было принято решение его добавить, так как в ТЗ сказано, что можно добавлять свои решения, которые при проверке будут оценены.

---
